document.addEventListener("DOMContentLoaded",(function(){console.log("تهيئة وظائف جدول المقاسات المعزولة...");initSizeChartFunctions()}));function initSizeChartFunctions(){const heightSliderInline=document.getElementById("heightSliderInline");const weightSliderInline=document.getElementById("weightSliderInline");const heightValueInline=document.getElementById("heightValueInline");const weightValueInline=document.getElementById("weightValueInline");if(!heightSliderInline||!weightSliderInline){console.log("لم يتم العثور على أشرطة التمرير في جدول المقاسات");return}console.log("تم العثور على أشرطة التمرير في جدول المقاسات");updateSliderBubble(heightSliderInline,heightValueInline);updateSliderBubble(weightSliderInline,weightValueInline);updateRecommendedSizeInline();heightSliderInline.addEventListener("input",(function(){console.log("تغيير قيمة الطول");updateSliderBubble(this,heightValueInline);updateRecommendedSizeInline()}));weightSliderInline.addEventListener("input",(function(){console.log("تغيير قيمة الوزن");updateSliderBubble(this,weightValueInline);updateRecommendedSizeInline()}));const unitButtons=document.querySelectorAll(".unit-btn");unitButtons.forEach((button=>{button.addEventListener("click",(function(){const unitType=this.getAttribute("data-unit");console.log("تغيير وحدة القياس إلى:",unitType);unitButtons.forEach((btn=>btn.classList.remove("active")));this.classList.add("active");updateMeasurementUnits(unitType)}))}));const sizeChartTabs=document.querySelectorAll(".size-chart-tab-inline");sizeChartTabs.forEach((tab=>{tab.addEventListener("click",(function(){const tabId=this.getAttribute("data-tab");console.log("تغيير تبويب جدول المقاسات إلى:",tabId);sizeChartTabs.forEach((t=>t.classList.remove("active")));document.querySelectorAll(".tab-pane-inline").forEach((p=>p.classList.remove("active")));this.classList.add("active");const targetPane=document.getElementById(tabId);if(targetPane){targetPane.classList.add("active")}}))}))}function updateSliderBubble(slider,valueElement){if(!slider||!valueElement)return;const val=slider.value;const min=parseFloat(slider.min)||0;const max=parseFloat(slider.max)||100;const percentage=(val-min)/(max-min)*100;valueElement.textContent=val;const bubble=valueElement.closest(".slider-bubble");if(bubble){bubble.style.left=`calc(${percentage}% - ${bubble.offsetWidth/2}px)`}}function updateRecommendedSizeInline(){const heightSlider=document.getElementById("heightSliderInline");const weightSlider=document.getElementById("weightSliderInline");const recommendedSizeElement=document.getElementById("recommendedSizeInline");if(!heightSlider||!weightSlider||!recommendedSizeElement){console.log("عناصر حاسبة المقاس غير موجودة");return}let height=parseInt(heightSlider.value);let weight=parseInt(weightSlider.value);const activeUnit=document.querySelector(".unit-btn.active")?.getAttribute("data-unit")||"metric";if(activeUnit==="imperial"){height=Math.round(height*2.54);weight=Math.round(weight/2.205)}const size=calculateSize(height,weight);if(recommendedSizeElement.textContent!==size){recommendedSizeElement.classList.add("updating");setTimeout((()=>{recommendedSizeElement.textContent=size;recommendedSizeElement.classList.remove("updating")}),300)}else{recommendedSizeElement.textContent=size}}function calculateSize(height,weight){let size="";if(height<=165){if(weight<=65){size="M"}else if(weight<=80){size="L"}else{size="XL"}}else if(height<=175){if(weight<=60){size="M"}else if(weight<=80){size="L"}else if(weight<=100){size="XL"}else{size="2XL"}}else if(height<=185){if(weight<=70){size="L"}else if(weight<=90){size="XL"}else if(weight<=110){size="2XL"}else{size="3XL"}}else{if(weight<=80){size="XL"}else if(weight<=100){size="2XL"}else{size="3XL"}}return size}function updateMeasurementUnits(unit){const heightSlider=document.getElementById("heightSliderInline");const weightSlider=document.getElementById("weightSliderInline");const heightValue=document.getElementById("heightValueInline");const weightValue=document.getElementById("weightValueInline");if(!heightSlider||!weightSlider||!heightValue||!weightValue)return;if(unit==="metric"){const currentHeight=heightSlider.value;const currentWeight=weightSlider.value;if(heightSlider.getAttribute("data-unit")==="imperial"){const metricHeight=Math.round(parseInt(currentHeight)*2.54);heightSlider.setAttribute("data-unit","metric");heightSlider.min=150;heightSlider.max=210;heightSlider.value=metricHeight;heightValue.textContent=metricHeight;heightValue.nextElementSibling.textContent="سم"}if(weightSlider.getAttribute("data-unit")==="imperial"){const metricWeight=Math.round(parseInt(currentWeight)/2.205);weightSlider.setAttribute("data-unit","metric");weightSlider.min=40;weightSlider.max=160;weightSlider.value=metricWeight;weightValue.textContent=metricWeight;weightValue.nextElementSibling.textContent="كجم"}updateSliderMarks("height",[150,160,170,180,190,200,210]);updateSliderMarks("weight",[40,60,80,100,120,140,160])}else if(unit==="imperial"){const currentHeight=heightSlider.value;const currentWeight=weightSlider.value;if(heightSlider.getAttribute("data-unit")!=="imperial"){const imperialHeight=Math.round(parseInt(currentHeight)/2.54);heightSlider.setAttribute("data-unit","imperial");heightSlider.min=59;heightSlider.max=83;heightSlider.value=imperialHeight;heightValue.textContent=imperialHeight;heightValue.nextElementSibling.textContent="إنش"}if(weightSlider.getAttribute("data-unit")!=="imperial"){const imperialWeight=Math.round(parseInt(currentWeight)*2.205);weightSlider.setAttribute("data-unit","imperial");weightSlider.min=88;weightSlider.max=352;weightSlider.value=imperialWeight;weightValue.textContent=imperialWeight;weightValue.nextElementSibling.textContent="رطل"}updateSliderMarks("height",[59,63,67,71,75,79,83]);updateSliderMarks("weight",[88,132,176,220,264,308,352])}updateSliderBubble(heightSlider,heightValue);updateSliderBubble(weightSlider,weightValue);updateRecommendedSizeInline()}function updateSliderMarks(type,marks){const marksContainer=document.querySelector(`.${type}-marks`);if(!marksContainer)return;marksContainer.innerHTML="";marks.forEach((mark=>{const span=document.createElement("span");span.textContent=mark;marksContainer.appendChild(span)}))}