function addExtraEventListeners(){console.log("إضافة مستمعات أحداث إضافية...");document.getElementById("product-thumbnails")&&(console.log("تهيئة الصور المصغرة للمنتج..."),initProductThumbnails());document.querySelectorAll(".product-color-option").length>0&&(console.log("تهيئة اختيار لون المنتج..."),initProductColorSelection());document.querySelectorAll(".image-nav-btn").length>0&&(console.log("تهيئة أزرار التنقل بين صور المنتج..."),initProductImageNavigation());document.querySelectorAll(".mobile-color-option").length>0&&(console.log("تهيئة اختيار اللون للموبايل..."),initMobileColorSelection());const e=document.querySelectorAll(".gallery-nav-button");e.length>0&&(console.log("تهيئة أزرار التنقل في معرض الصور..."),e.forEach((e=>{e.addEventListener("click",(()=>{const t=e.classList.contains("prev")?"prev":"next";console.log(`تم النقر على زر ${t} في المعرض`),navigateGallery(t)}))})));const t=document.querySelectorAll(".gallery-color-option");t.length>0&&(console.log("تهيئة أزرار الألوان في معرض الصور..."),t.forEach((e=>{e.addEventListener("click",(()=>{const t=e.dataset.color;console.log(`تم اختيار اللون ${t} في المعرض`),t&&t!==galleryCurrentColor&&(galleryCurrentColor=t,galleryCurrentImageIndex=0,updateGalleryColorSelection(t),updateGalleryThumbnails(t),updateGalleryMainImage(t,galleryCurrentImageIndex),updateGalleryCounter(galleryCurrentImageIndex+1,productGalleryImages[t].length))}))})))}function initHeroSlider(){const e=document.querySelectorAll(".hero-slide"),t=document.querySelector(".prev-slide"),n=document.querySelector(".next-slide"),o=document.querySelector(".progress-fill");let l=0;const i=e.length;let r;if(0===i)return void console.warn("لم يتم العثور على شرائح في السلايدر!");s(l),e.forEach(((e,t)=>{const n=e.querySelector(".image-layer");if(n){const e=n.style.backgroundImage||"";if(e){const n=e.replace(/url\(['"]?(.*?)['"]?\)/i,"$1");if(n){const e=new Image;e.onload=function(){console.log(`تم تحميل الصورة ${t+1} بنجاح`)},e.onerror=function(){console.error(`فشل في تحميل الصورة ${t+1}: ${n}`)},e.src=n}}}})),t&&n?(t.addEventListener("click",(()=>{c(l-1),u()})),n.addEventListener("click",(()=>{c(l+1),u()}))):console.warn("لم يتم العثور على أزرار التنقل للسلايدر!"),d();const a=document.querySelector(".hero-section");function c(t){t<0?t=i-1:t>=i&&(t=0),e[l].setAttribute("data-slide-index",""),l=t,e[l].setAttribute("data-slide-index","0"),s(l)}function s(e){if(o){const t=(e+1)/i*100;o.style.width=`${t}%`}}function d(){clearInterval(r),r=setInterval((()=>{c(l+1)}),6e3)}function u(){clearInterval(r),d()}a&&(a.addEventListener("mouseenter",(()=>{clearInterval(r)})),a.addEventListener("mouseleave",(()=>{d()})));document.querySelectorAll(".color-option").forEach((e=>{e.addEventListener("click",(function(){console.log("تم اختيار اللون:",this.getAttribute("data-color"))}))}));const m=document.querySelector(".features-btn"),g=document.querySelector(".size-chart-btn");m&&m.addEventListener("click",(function(e){e.preventDefault();const t=this.getAttribute("onclick")?.match(/scrollToSection\('(.+?)'\)/)?.[1]||"texture-features",n=document.getElementById(t);n&&n.scrollIntoView({behavior:"smooth"})})),g&&g.addEventListener("click",(function(e){e.preventDefault(),"function"==typeof openSizeChart?openSizeChart():console.warn("وظيفة openSizeChart غير معرفة")}));document.querySelectorAll(".hero-cta-button").forEach((e=>{e.addEventListener("click",(function(e){const t=this.getAttribute("href");if(t&&t.startsWith("#")){e.preventDefault();const n=document.querySelector(t);n&&n.scrollIntoView({behavior:"smooth"})}}))}))}function initColorShowcase(){document.addEventListener("click",(function(e){!mobileMenu.classList.contains("active")||mobileMenu.contains(e.target)||mobileMenuToggle.contains(e.target)||(mobileMenu.classList.remove("active"),mobileMenuToggle.querySelector("i").className="fas fa-bars",body.style.overflow="")})),mobileMenu.addEventListener("click",(function(e){e.stopPropagation()}))}function initHeaderScrollEffect(){const e=document.querySelector(".main-header");let t=0;window.addEventListener("scroll",(function(){let n=window.pageYOffset||document.documentElement.scrollTop;n>50?e.classList.add("scrolled"):e.classList.remove("scrolled"),e.style.transform=n>t&&n>200?"translateY(-100%)":"translateY(0)",t=n}))}document.addEventListener("DOMContentLoaded",(function(){console.log("تم تحميل DOM، جاري تهيئة المكونات..."),initHeroSlider(),initColorShowcase(),initSizeSelection(),initProductSearch(),initSmoothScroll(),initOrderForm(),initMobileMenu(),initHeaderScrollEffect();document.querySelector(".product-details-gallery-section")?(console.log("تم العثور على قسم المعرض، جاري التهيئة..."),initProductGallery()):console.log("لم يتم العثور على قسم المعرض في الصفحة."),addExtraEventListeners(),initTestimonialsSlider(),initEnhancedTestimonials(),initReviewsGallery()})),window.addEventListener("load",(function(){console.log("تم تحميل جميع موارد الصفحة بنجاح (بما في ذلك الصور)");document.querySelector(".product-details-gallery-section")&&(console.log("إعادة تهيئة المعرض بعد تحميل جميع الموارد..."),updateGalleryThumbnails(galleryCurrentColor),updateGalleryColorSelection(galleryCurrentColor),updateGalleryMainImage(galleryCurrentColor,galleryCurrentImageIndex),updateGalleryCounter(galleryCurrentImageIndex+1,productGalleryImages[galleryCurrentColor].length));if(document.getElementById("product-thumbnails")){const e=document.querySelector(".product-color-option.active");if(e){const t=e.getAttribute("data-color");t&&(console.log("تحديث الصور المصغرة للمنتج بعد التحميل، اللون: "+t),updateProductThumbnails(t))}}})),document.querySelectorAll(".header-order-btn, .mobile-order-btn").forEach((e=>{e.addEventListener("click",(function(){const e=document.querySelector("#order-form");e&&e.scrollIntoView({behavior:"smooth"})}))}));const productGalleryImages={black:["public/images/black/full-black.jpg","public/images/black/black-tshirt.jpg"],white:[],silver:["public/images/silver/silver-tshirt.jpg","public/images/silver/full-silver.jpg"],beige:["public/images/beige/full.jpg","public/images/beige/beige-tshirt.jpg"]};let galleryCurrentColor="black",galleryCurrentImageIndex=0;function initProductGallery(){console.log("تهيئة معرض صور المنتج...");const e=document.querySelector(".product-details-gallery-section");if(!e)return void console.error("لم يتم العثور على قسم معرض الصور!");const t=Object.keys(productGalleryImages).filter((e=>productGalleryImages[e]&&productGalleryImages[e].length>0));if(!productGalleryImages[galleryCurrentColor]||0===productGalleryImages[galleryCurrentColor].length){if(!(t.length>0))return console.error("لا توجد ألوان مع صور متاحة في productGalleryImages! إخفاء المعرض."),void(e.style.display="none");{const e=galleryCurrentColor;galleryCurrentColor=t[0],galleryCurrentImageIndex=0,console.log(`اللون الافتراضي '${e}' لا يحتوي على صور أو غير صالح، تم التغيير إلى أول لون متاح: ${galleryCurrentColor}`)}}updateGalleryColorSelection(galleryCurrentColor),updateGalleryThumbnails(galleryCurrentColor),updateGalleryMainImage(galleryCurrentColor,galleryCurrentImageIndex),updateGalleryCounter(galleryCurrentImageIndex+1,productGalleryImages[galleryCurrentColor]?productGalleryImages[galleryCurrentColor].length:0);const n=e.querySelector(".gallery-nav-button.prev"),o=e.querySelector(".gallery-nav-button.next");if(n&&o){n.addEventListener("click",(()=>{navigateGallery("prev")})),o.addEventListener("click",(()=>{navigateGallery("next")}));(productGalleryImages[galleryCurrentColor]||[]).length<=1?(n.style.display="none",o.style.display="none"):(n.style.display="",o.style.display="")}else console.warn("لم يتم العثور على أزرار التنقل في المعرض!");const l=e.querySelectorAll(".gallery-color-option");l.length?(l.forEach((e=>{const t=e.dataset.color;productGalleryImages[t]&&0!==productGalleryImages[t].length?e.style.display="":(e.style.display="none",console.log(`إخفاء خيار اللون ${t} لعدم وجود صور.`)),e.addEventListener("click",(()=>{const t=e.dataset.color;if(productGalleryImages[t]&&productGalleryImages[t].length>0&&t!==galleryCurrentColor){galleryCurrentColor=t,galleryCurrentImageIndex=0,updateGalleryColorSelection(t),updateGalleryThumbnails(t),updateGalleryMainImage(t,galleryCurrentImageIndex);const e=productGalleryImages[t];updateGalleryCounter(galleryCurrentImageIndex+1,e.length),n&&o&&(e.length<=1?(n.style.display="none",o.style.display="none"):(n.style.display="",o.style.display=""))}else productGalleryImages[t]&&0!==productGalleryImages[t].length||console.warn(`تم النقر على لون (${t}) لا يحتوي على صور.`)}))})),updateGalleryColorSelection(galleryCurrentColor)):console.warn("لم يتم العثور على خيارات الألوان في المعرض!"),initGalleryZoom(),console.log("اكتملت تهيئة معرض الصور")}function updateGalleryThumbnails(e){const t=document.getElementById("gallery-thumbnails");if(!t)return void console.error("لم يتم العثور على حاوية الصور المصغرة!");t.innerHTML="";const n=productGalleryImages[e];return n&&0!==n.length?n.length<=1?(t.style.display="none",void console.log(`إخفاء الصور المصغرة لوجود صورة واحدة فقط للون ${e}.`)):(t.style.display="",t.classList.add("loading"),void setTimeout((()=>{n.forEach(((o,l)=>{try{const i=document.createElement("div");i.className="gallery-thumbnail "+(l===galleryCurrentImageIndex?"active":""),i.dataset.index=l;const r=new Image;r.src=o,r.alt=`طقم ${getColorName(e)} - صورة مصغرة ${l+1}`;const a=document.createElement("div");a.className="thumbnail-loader",a.innerHTML='<div class="spinner"></div>',i.appendChild(a),r.onload=function(){a&&a.parentNode===i&&i.removeChild(a),i.appendChild(r),i.classList.add("loaded")},r.onerror=function(){console.error(`فشل في تحميل الصورة المصغرة: ${o}`),a&&a.parentNode===i&&i.removeChild(a),i.classList.add("error")},i.addEventListener("click",(()=>{const e=parseInt(i.dataset.index,10);e!==galleryCurrentImageIndex&&(galleryCurrentImageIndex=e,updateGalleryMainImage(galleryCurrentColor,galleryCurrentImageIndex),updateGalleryThumbnailSelection(galleryCurrentImageIndex),updateGalleryCounter(galleryCurrentImageIndex+1,n.length))})),t.appendChild(i)}catch(e){console.error(`حدث خطأ أثناء إنشاء الصورة المصغرة رقم ${l+1}:`,e)}})),t.classList.remove("loading")}),50)):(console.warn(`لا توجد صور متاحة للون: ${e}. إخفاء حاوية الصور المصغرة.`),void(t.style.display="none"))}function updateGalleryMainImage(e,t){const n=document.getElementById("current-main-image"),o=document.querySelector(".main-image-container"),l=document.getElementById("main-image-caption");if(!n||!o)return void console.error("لم يتم العثور على عنصر الصورة الرئيسية (#current-main-image) أو حاويتها (.main-image-container)!");const i=productGalleryImages[e];if(o.classList.remove("loading","no-image","error"),n.style.opacity="0",!i||0===i.length)return console.warn(`لا توجد صور للون ${e}. إخفاء الصورة الرئيسية.`),n.src="",n.alt="لا توجد صورة متاحة",o.classList.add("no-image"),void(l&&(l.textContent=`طقم ${getColorName(e)} - لا توجد صور`));(t<0||t>=i.length)&&(console.warn(`فهرس الصورة (${t}) غير صالح للون ${e}. عدد الصور: ${i.length}. العودة إلى الفهرس 0.`),t=0,galleryCurrentImageIndex=0);const r=i[t],a=`طقم ${getColorName(e)} - صورة ${t+1}`;o.classList.add("loading");const c=new Image;c.onload=function(){n.src=r,n.alt=a,o.classList.remove("loading"),n.style.opacity="1",l&&(l.textContent=`طقم ${getColorName(e)} - (${t+1}/${i.length})`)},c.onerror=function(){console.error(`فشل تحميل الصورة الرئيسية: ${r}`),o.classList.remove("loading"),n.src="",n.alt=`فشل تحميل الصورة: ${r}`,o.classList.add("error"),n.style.opacity="1",l&&(l.textContent=`طقم ${getColorName(e)} - خطأ في تحميل الصورة`)},c.src=r}function updateGalleryThumbnailSelection(e){document.querySelectorAll("#gallery-thumbnails .gallery-thumbnail").forEach((t=>{parseInt(t.dataset.index,10)===e?t.classList.add("active"):t.classList.remove("active")}))}function updateGalleryColorSelection(e){document.querySelectorAll(".gallery-color-option").forEach((t=>{const n=t.dataset.color;productGalleryImages[n]&&productGalleryImages[n].length>0?(t.style.display="",n===e?t.classList.add("active"):t.classList.remove("active")):(t.style.display="none",t.classList.remove("active"))}))}function navigateGallery(e){const t=productGalleryImages[galleryCurrentColor];if(!t||t.length<=1)return;const n=t.length;let o;o="prev"===e?(galleryCurrentImageIndex-1+n)%n:(galleryCurrentImageIndex+1)%n,o!==galleryCurrentImageIndex&&(galleryCurrentImageIndex=o,updateGalleryMainImage(galleryCurrentColor,galleryCurrentImageIndex),updateGalleryThumbnailSelection(galleryCurrentImageIndex),updateGalleryCounter(galleryCurrentImageIndex+1,n))}function updateGalleryCounter(e,t){const n=document.getElementById("gallery-counter");n?t>1?(n.textContent=`${e} / ${t}`,n.style.display=""):n.style.display="none":console.warn("لم يتم العثور على عنصر عداد المعرض (#gallery-counter)!")}function initGalleryZoom(){console.log("تهيئة وظيفة تكبير الصورة...");const e=document.querySelector(".zoom-button"),t=document.getElementById("image-zoom-modal"),n=document.getElementById("zoomed-image"),o=document.querySelector(".close-zoom");e?t&&n&&o?(e.addEventListener("click",(()=>{console.log("تم النقر على زر التكبير");const e=document.getElementById("current-main-image");e&&(n.src=e.src,n.alt=e.alt,t.style.display="flex")})),o.addEventListener("click",(()=>{console.log("تم النقر على زر إغلاق التكبير"),t.style.display="none"})),t.addEventListener("click",(e=>{e.target===t&&(console.log("تم النقر على خلفية النافذة المنبثقة"),t.style.display="none")}))):console.error("عناصر نافذة التكبير غير مكتملة!"):console.error("زر التكبير غير موجود!")}function getColorName(e){return{black:"الأسود",white:"الأبيض",silver:"الفضي",beige:"البيج"}[e]||e}function initTestimonialsSlider(){const e=document.querySelector(".testimonials-carousel");if(!e)return;const t=e.querySelectorAll(".testimonial"),n=document.querySelector(".prev-testimonial"),o=document.querySelector(".next-testimonial");let l=0;function i(e){t.forEach(((t,n)=>{t.classList.toggle("active",n===e)})),l=e}i(0),n&&n.addEventListener("click",(()=>{l=(l-1+t.length)%t.length,i(l)})),o&&o.addEventListener("click",(()=>{l=(l+1)%t.length,i(l)})),setInterval((()=>{l=(l+1)%t.length,i(l)}),5e3)}function initEnhancedTestimonials(){console.log("تهيئة قسم التقييمات المحسن...");const e=document.querySelector(".testimonials-slider");if(!e)return void console.log("لم يتم العثور على عنصر slider للتقييمات");const t=e.querySelectorAll(".testimonial-card");if(0===t.length)return void console.log("لم يتم العثور على بطاقات تقييمات");const n=document.querySelector(".prev-testimonial"),o=document.querySelector(".next-testimonial");let l,i=0;function r(e){t.forEach(((t,n)=>{t.classList.toggle("active",n===e)})),i=e}function a(){clearInterval(l),l=setInterval((()=>{r((i+1)%t.length)}),8e3)}function c(){clearInterval(l),a()}r(0),n&&n.addEventListener("click",(()=>{r((i-1+t.length)%t.length),c()})),o&&o.addEventListener("click",(()=>{r((i+1)%t.length),c()})),a(),e.addEventListener("mouseenter",(()=>{clearInterval(l)})),e.addEventListener("mouseleave",(()=>{a()}))}function initEgyptianReviews(){const e=document.querySelector(".reviews-gallery"),t=document.querySelector(".see-more-button");if(!e||!t)return;const n=e.querySelectorAll(".review-gallery-item");let o=6;n.forEach(((e,t)=>{t>=o&&(e.style.display="none")})),t.addEventListener("click",(function(e){e.preventDefault(),o>=n.length?(o=6,t.innerHTML='عرض المزيد من التقييمات <i class="fas fa-chevron-down"></i>',t.classList.remove("expanded"),document.querySelector(".reviews-gallery-section").scrollIntoView({behavior:"smooth",block:"start"})):(o=n.length,t.innerHTML='عرض أقل <i class="fas fa-chevron-up"></i>',t.classList.add("expanded")),n.forEach(((e,t)=>{t<o?(e.style.display="",t>=6&&(e.style.animation="fadeInUp 0.5s forwards",e.style.animationDelay=.1*(t-6)+"s")):e.style.display="none"}))})),n.forEach((e=>{e.querySelector(".review-gallery-overlay");const t=e.querySelector(".review-text");if(t){const l=t.textContent,i=(o=100,(n=l).length<=o?n:n.substring(0,o)+"...");window.innerWidth<768&&l.length>100&&(t.textContent=i,e.addEventListener("mouseenter",(()=>{t.textContent=l})),e.addEventListener("mouseleave",(()=>{t.textContent=i})))}var n,o}))}function initReviewsGalleryLightbox(){const e=document.querySelectorAll(".review-gallery-item, .main-review-image");if(0===e.length)return;if(!document.querySelector(".reviews-lightbox")){const e=document.createElement("div");e.className="reviews-lightbox",e.innerHTML='\n            <div class="lightbox-overlay"></div>\n            <div class="lightbox-container">\n                <div class="lightbox-content">\n                    <img src="" alt="صورة تقييم كبيرة">\n                    <div class="lightbox-caption">تجربة العميل مع الطقم</div>\n                </div>\n                <button class="lightbox-close"><i class="fas fa-times"></i></button>\n                <button class="lightbox-nav prev"><i class="fas fa-chevron-right"></i></button>\n                <button class="lightbox-nav next"><i class="fas fa-chevron-left"></i></button>\n            </div>\n        ',document.body.appendChild(e);const t=document.createElement("style");t.textContent="\n            .reviews-lightbox {\n                position: fixed;\n                top: 0;\n                left: 0;\n                right: 0;\n                bottom: 0;\n                z-index: 9999;\n                display: none;\n                direction: rtl;\n            }\n            .reviews-lightbox.active {\n                display: block;\n                animation: lightboxFadeIn 0.3s ease forwards;\n            }\n            @keyframes lightboxFadeIn {\n                from { opacity: 0; }\n                to { opacity: 1; }\n            }\n            .lightbox-overlay {\n                position: absolute;\n                top: 0;\n                left: 0;\n                right: 0;\n                bottom: 0;\n                background-color: rgba(0,0,0,0.92);\n                animation: overlayFadeIn 0.4s ease;\n            }\n            @keyframes overlayFadeIn {\n                from { opacity: 0; }\n                to { opacity: 1; }\n            }\n            .lightbox-container {\n                position: absolute;\n                top: 50%;\n                left: 50%;\n                transform: translate(-50%, -50%) scale(0.95);\n                max-width: 90%;\n                max-height: 90%;\n                animation: containerZoomIn 0.4s ease forwards;\n            }\n            @keyframes containerZoomIn {\n                from { transform: translate(-50%, -50%) scale(0.9); opacity: 0; }\n                to { transform: translate(-50%, -50%) scale(1); opacity: 1; }\n            }\n            .lightbox-content {\n                position: relative;\n                width: 100%;\n                height: 100%;\n                text-align: center;\n            }\n            .lightbox-content img {\n                max-width: 100%;\n                max-height: 85vh;\n                display: block;\n                margin: 0 auto;\n                box-shadow: 0 8px 25px rgba(0,0,0,0.3);\n                border-radius: 5px;\n                transition: opacity 0.3s ease;\n            }\n            .lightbox-caption {\n                color: white;\n                text-align: center;\n                padding: 15px;\n                font-size: 18px;\n                font-weight: 500;\n            }\n            .lightbox-close {\n                position: absolute;\n                top: -50px;\n                right: 0;\n                background: none;\n                border: none;\n                color: white;\n                font-size: 28px;\n                cursor: pointer;\n                opacity: 0.8;\n                transition: all 0.3s ease;\n            }\n            .lightbox-close:hover {\n                opacity: 1;\n                transform: scale(1.1);\n            }\n            .lightbox-nav {\n                position: absolute;\n                top: 50%;\n                transform: translateY(-50%);\n                background: rgba(255,255,255,0.1);\n                color: white;\n                border: none;\n                width: 50px;\n                height: 50px;\n                border-radius: 50%;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                cursor: pointer;\n                opacity: 0.7;\n                transition: all 0.3s ease;\n            }\n            .lightbox-nav:hover {\n                background: rgba(255,255,255,0.3);\n                opacity: 1;\n                transform: translateY(-50%) scale(1.1);\n            }\n            .lightbox-nav.prev {\n                right: -80px;\n            }\n            .lightbox-nav.next {\n                left: -80px;\n            }\n            .lightbox-nav i {\n                font-size: 20px;\n            }\n            @media (max-width: 992px) {\n                .lightbox-nav.prev { right: -60px; }\n                .lightbox-nav.next { left: -60px; }\n            }\n            @media (max-width: 768px) {\n                .lightbox-nav.prev { right: 10px; }\n                .lightbox-nav.next { left: 10px; }\n                .lightbox-nav {\n                    width: 40px;\n                    height: 40px;\n                    background: rgba(0,0,0,0.5);\n                }\n                .lightbox-close {\n                    top: 10px;\n                    right: 10px;\n                    background: rgba(0,0,0,0.5);\n                    width: 40px;\n                    height: 40px;\n                    border-radius: 50%;\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                }\n            }\n        ",document.head.appendChild(t)}const t=document.querySelector(".reviews-lightbox"),n=t.querySelector(".lightbox-content img"),o=t.querySelector(".lightbox-caption"),l=t.querySelector(".lightbox-close"),i=t.querySelector(".lightbox-nav.prev"),r=t.querySelector(".lightbox-nav.next");let a=[],c=[];e.forEach((e=>{const t=e.querySelector("img");t&&(a.push(t.src),c.push(t.alt||"صورة تقييم العميل"))}));let s=0;function d(){t.classList.remove("active"),document.body.style.overflow=""}function u(){s=(s-1+a.length)%a.length,g()}function m(){s=(s+1)%a.length,g()}function g(){n.style.opacity="0",setTimeout((()=>{n.src=a[s],n.style.opacity="1"}),200)}e.forEach(((e,l)=>{e.addEventListener("click",(function(){const e=this.querySelector("img");e&&(n.style.opacity="0",n.src=e.src,s=a.indexOf(e.src),o.textContent=e.alt||"صورة تقييم العميل",t.classList.add("active"),document.body.style.overflow="hidden",setTimeout((()=>{n.style.opacity="1"}),100))}))})),l.addEventListener("click",d),t.querySelector(".lightbox-overlay").addEventListener("click",d),n.style.transition="opacity 0.3s ease",i.addEventListener("click",u),r.addEventListener("click",m),document.addEventListener("keydown",(function(e){t.classList.contains("active")&&("Escape"===e.key?d():"ArrowLeft"!==e.key&&"ArrowRight"!==e.key||("ArrowLeft"===e.key?u():m()))}))}function initReviewsGallery(){const e=document.querySelectorAll(".review-gallery-item"),t=document.querySelector(".see-more-button");window.innerWidth<=768&&setupMobileReviewsInteraction(e),t&&(t.style.display="none"),e.forEach((e=>{e.style.display="",e.style.opacity="1"})),e.forEach((e=>{const t=e.querySelector(".review-text");if(t&&t.textContent.length>120&&window.innerWidth>768){const n=t.textContent;t.setAttribute("data-full-text",n),e.addEventListener("mouseenter",(()=>{t.textContent=n})),e.addEventListener("mouseleave",(()=>{t.textContent=n.substring(0,120)+"..."})),setTimeout((()=>{t.textContent=n.substring(0,120)+"..."}),100)}}))}function setupMobileReviewsInteraction(e){if(!e.length)return;const t=document.querySelector(".reviews-gallery");let n,o,l=!1;document.createElement("div").className="review-scroll-indicator",e.forEach(((t,n)=>{const o=document.createElement("div");o.className="review-counter",o.textContent=`${n+1}/${e.length}`,t.appendChild(o);const l=t.querySelector(".review-text");if(l){const e=l.textContent;if(e.length>120){const n=e.substring(0,120)+"...";l.textContent=n,l.setAttribute("data-full-text",e);const o=document.createElement("button");o.className="read-more-btn",o.textContent="قراءة المزيد",t.querySelector(".review-content").appendChild(o),o.addEventListener("click",(t=>{t.stopPropagation(),l.textContent.includes("...")?(l.textContent=e,o.textContent="عرض أقل"):(l.textContent=n,o.textContent="قراءة المزيد")}))}}})),t&&(t.addEventListener("mousedown",(e=>{l=!0,n=e.pageX,o=t.scrollLeft,t.style.cursor="grabbing"})),t.addEventListener("touchstart",(e=>{l=!0,n=e.touches[0].pageX,o=t.scrollLeft})),t.addEventListener("mousemove",(e=>{if(!l)return;e.preventDefault();const i=e.pageX-n;t.scrollLeft=o-i})),t.addEventListener("touchmove",(e=>{if(!l)return;const i=e.touches[0].pageX-n;t.scrollLeft=o-i})),t.addEventListener("mouseup",(()=>{l=!1,t.style.cursor="grab"})),t.addEventListener("mouseleave",(()=>{l=!1,t.style.cursor="grab"})),t.addEventListener("touchend",(()=>{l=!1})),t.addEventListener("scroll",(()=>{const n=t.scrollLeft,o=e[0].offsetWidth+20,l=Math.round(n/o);e.forEach(((e,t)=>{t===l?e.classList.add("active"):e.classList.remove("active")}))}))),e.forEach((e=>{e.addEventListener("click",(()=>{window.innerWidth<=768&&(document.fullscreenElement?document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen():e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen())}))}))}function convertArabicToEnglishNumbers(e){if(!e)return"";const t={"٠":"0","١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9"};return e.replace(/[٠١٢٣٤٥٦٧٨٩]/g,(e=>t[e]))}function initSmoothScroll(){document.querySelectorAll('a[href^="#"]').forEach((e=>{e.addEventListener("click",(function(e){e.preventDefault();const t=this.getAttribute("href");if("#"===t)return;const n=document.querySelector(t);n&&window.scrollTo({top:n.offsetTop-80,behavior:"smooth"})}))}))}function initScrollEffects(){const e=document.querySelector(".main-header");window.addEventListener("scroll",(function(){window.scrollY>100?e.classList.add("scrolled"):e.classList.remove("scrolled")}))}function openSizeChart(){console.log("التمرير إلى قسم المقاسات التفاعلي...");const e=document.querySelector(".size-chart-section");if(e){e.scrollIntoView({behavior:"smooth",block:"start"});const t=document.querySelector('.size-chart-tab-inline[data-tab="chart-calculator"]'),n=document.getElementById("chart-calculator");t&&!t.classList.contains("active")&&(document.querySelectorAll(".size-chart-tab").forEach((e=>e.classList.remove("active"))),document.querySelectorAll(".tab-pane").forEach((e=>e.classList.remove("active"))),t.classList.add("active"),n&&n.classList.add("active")),e.classList.add("highlight-section"),setTimeout((()=>{e.classList.remove("highlight-section")}),1500)}else console.error("لم يتم العثور على قسم جدول المقاسات!")}function initSizeChartModal(){const e=document.getElementById("sizeChartModal");if(!e)return;const t=e.querySelector(".close-size-chart");t&&t.addEventListener("click",(function(){e.classList.remove("show"),document.body.style.overflow=""})),e.addEventListener("click",(function(t){t.target===e&&(e.classList.remove("show"),document.body.style.overflow="")}));const n=document.querySelectorAll(".size-chart-tab");n.forEach((e=>{e.addEventListener("click",(function(){n.forEach((e=>e.classList.remove("active"))),document.querySelectorAll(".tab-pane").forEach((e=>e.classList.remove("active"))),e.classList.add("active");const t=e.getAttribute("data-tab");if(t){const e=document.getElementById(t);e&&e.classList.add("active")}}))}));document.querySelectorAll(".size-chart-button, .view-size-chart-btn, .check-size-btn").forEach((e=>{e.addEventListener("click",(function(e){e.preventDefault(),openSizeChart()}))}))}function initSizeCalculator(){const e=document.querySelectorAll(".size-chart-tab-inline");e&&e.length>0&&e.forEach((e=>{e.addEventListener("click",(function(){document.querySelectorAll(".size-chart-tab").forEach((e=>e.classList.remove("active"))),document.querySelectorAll(".tab-pane").forEach((e=>e.classList.remove("active"))),this.classList.add("active");const e=this.getAttribute("data-tab");if(e){const t=document.getElementById(e);t&&t.classList.add("active")}}))})),initSlider("heightSlider","heightValue",updateRecommendedSize),initSlider("weightSlider","weightValue",updateRecommendedSize),initSlider("heightSliderInline","heightValueInline",updateRecommendedSizeInline),initSlider("weightSliderInline","weightValueInline",updateRecommendedSizeInline),initUnitToggle(".unit-btn",changeUnits),initUnitToggle(".unit-toggle",toggleChartUnits);const t=document.querySelectorAll(".size-units-toggle .unit-toggle");t&&t.length>0&&t.forEach((e=>{e.addEventListener("click",(function(){document.querySelectorAll(".size-units-toggle .unit-toggle").forEach((e=>e.classList.remove("active"))),this.classList.add("active");const e=this.getAttribute("data-unit");"metric"===e?(document.getElementById("metric-table").style.display="table",document.getElementById("imperial-table").style.display="none"):"imperial"===e&&(document.getElementById("metric-table").style.display="none",document.getElementById("imperial-table").style.display="table")}))})),updateRecommendedSize(),updateRecommendedSizeInline()}function initSlider(e,t,n){const o=document.getElementById(e),l=document.getElementById(t);o&&l&&(updateSliderBubble(o,l),o.addEventListener("input",(()=>{updateSliderBubble(o,l),"function"==typeof n&&n()})))}function initUnitToggle(e,t){const n=document.querySelectorAll(e);n&&n.length>0&&n.forEach((e=>{e.addEventListener("click",(()=>{n.forEach((e=>e.classList.remove("active"))),e.classList.add("active");const o=e.getAttribute("data-unit");"function"==typeof t&&t(o)}))}))}function updateRecommendedSizeInline(){const e=document.getElementById("heightSliderInline"),t=document.getElementById("heightValueInline"),n=document.getElementById("weightSliderInline"),o=document.getElementById("weightValueInline");if(!(e&&n&&t&&o))return;let l=parseInt(e.value),i=parseInt(n.value);"imperial"===e.getAttribute("data-unit")&&(l=Math.round(2.54*l)),"imperial"===n.getAttribute("data-unit")&&(i=Math.round(i/2.205));const r=calculateSize(l,i);document.getElementById("recommendedSizeInline").textContent=r}function calculateSize(e,t){let n="";return n=e<=165?t<=65?"M":t<=80?"L":"XL":e<=175?t<=60?"M":t<=80?"L":t<=100?"XL":"2XL":e<=185?t<=70?"L":t<=90?"XL":"2XL":t<=80?"XL":"2XL",n}function updateSliderBubble(e,t){if(!e||!t)return;const n=e.value,o=e.min,l=100*(n-o)/(e.max-o);t.textContent=n,t.style.left=`calc(${l}%)`,t.classList.add("updating"),setTimeout((()=>{t.classList.remove("updating")}),200)}function updateSliderMarks(e,t){if(!e||!t)return;const n=parseInt(e.min)||0,o=((parseInt(e.max)||100)-n)/6;t.innerHTML="";for(let e=0;e<=6;e++){const l=document.createElement("span");l.textContent=Math.round(n+o*e),t.appendChild(l)}}function changeUnits(e){const t=document.getElementById("heightSlider"),n=document.getElementById("weightSlider");document.querySelector(".height-field label"),document.querySelector(".weight-field label");if("metric"===e){if(t){t.min="150",t.max="210","imperial"===t.getAttribute("data-unit")&&(t.value=Math.round(2.54*t.value)),t.setAttribute("data-unit","metric"),updateSliderBubble(t,document.getElementById("heightValue"));const e=document.getElementById("heightValue").nextElementSibling;e&&(e.textContent="سم"),updateSliderMarks(t,document.querySelector(".height-marks"))}if(n){n.min="40",n.max="160","imperial"===n.getAttribute("data-unit")&&(n.value=Math.round(n.value/2.205)),n.setAttribute("data-unit","metric"),updateSliderBubble(n,document.getElementById("weightValue"));const e=document.getElementById("weightValue").nextElementSibling;e&&(e.textContent="كجم"),updateSliderMarks(n,document.querySelector(".weight-marks"))}}else if("imperial"===e){if(t){t.min="59",t.max="83","metric"===t.getAttribute("data-unit")&&(t.value=Math.round(t.value/2.54)),t.setAttribute("data-unit","imperial"),updateSliderBubble(t,document.getElementById("heightValue"));const e=document.getElementById("heightValue").nextElementSibling;e&&(e.textContent="إنش"),updateSliderMarks(t,document.querySelector(".height-marks"))}if(n){n.min="88",n.max="352","metric"===n.getAttribute("data-unit")&&(n.value=Math.round(2.205*n.value)),n.setAttribute("data-unit","imperial"),updateSliderBubble(n,document.getElementById("weightValue"));const e=document.getElementById("weightValue").nextElementSibling;e&&(e.textContent="رطل"),updateSliderMarks(n,document.querySelector(".weight-marks"))}}updateRecommendedSize()}function toggleChartUnits(e){const t=document.getElementById("metric-table"),n=document.getElementById("imperial-table");"metric"===e&&t&&n?(t.style.display="table",n.style.display="none"):"imperial"===e&&t&&n&&(t.style.display="none",n.style.display="table")}function updateRecommendedSize(){const e=document.getElementById("heightSlider"),t=document.getElementById("weightSlider"),n=document.getElementById("recommendedSize");if(!e||!t||!n)return;let o=parseInt(e.value),l=parseInt(t.value),i="";i="metric"===(document.querySelector(".unit-btn.active")?.getAttribute("data-unit")||"metric")?o<=160?l<=60?"S":l<=75?"M":l<=90?"L":l<=105?"XL":"2XL":o<=170?l<=55?"S":l<=70?"M":l<=85?"L":l<=100?"XL":"2XL":o<=180?l<=65?"M":l<=80?"L":l<=95?"XL":"2XL":o<=190?l<=75?"L":l<=90?"XL":"2XL":l<=85?"XL":"2XL":o<=63?l<=132?"S":l<=165?"M":l<=198?"L":l<=231?"XL":"2XL":o<=67?l<=121?"S":l<=154?"M":l<=187?"L":l<=220?"XL":"2XL":o<=71?l<=143?"M":l<=176?"L":l<=209?"XL":"2XL":o<=75?l<=165?"L":l<=198?"XL":"2XL":l<=187?"XL":"2XL",n.textContent=i,n.classList.add("size-updated"),setTimeout((()=>{n.classList.remove("size-updated")}),500)}function initGalleryZoom(){console.log("تهيئة وظيفة تكبير الصورة...");const e=document.querySelector(".zoom-button"),t=document.getElementById("image-zoom-modal"),n=document.getElementById("zoomed-image"),o=document.querySelector(".close-zoom");e?t&&n&&o?(e.addEventListener("click",(()=>{console.log("تم النقر على زر التكبير");const e=document.getElementById("current-main-image");e&&(n.src=e.src,n.alt=e.alt,t.style.display="flex")})),o.addEventListener("click",(()=>{console.log("تم النقر على زر إغلاق التكبير"),t.style.display="none"})),t.addEventListener("click",(e=>{e.target===t&&(console.log("تم النقر على خلفية النافذة المنبثقة"),t.style.display="none")}))):console.error("عناصر نافذة التكبير غير مكتملة!"):console.error("زر التكبير غير موجود!")}function docReady(e){"complete"===document.readyState||"interactive"===document.readyState?setTimeout(e,1):document.addEventListener("DOMContentLoaded",e)}function initOrderForm(){console.log("Inicializando formulario de pedido..."),initColorSelection(),initSizeSelection(),initQuantityControls(),initProductControls(),updateTotalPrice();const e=document.getElementById("codOrderForm");e&&e.addEventListener("submit",(function(e){e.preventDefault(),submitOrder()}))}function initColorSelection(){console.log("Inicializando selección de color...");document.querySelectorAll(".product-color-option").forEach((e=>{e.addEventListener("click",(function(){const e=this.closest(".product-item"),t=this.getAttribute("data-color");e.querySelectorAll(".product-color-option").forEach((e=>{e.classList.remove("active")})),this.classList.add("active"),updateProductPreview(e,t),console.log(`Color seleccionado: ${t} para el producto ID: ${e.getAttribute("data-product-id")}`)}))}))}function initSizeSelection(){console.log("Inicializando selección de talla...");document.querySelectorAll(".size-btn").forEach((e=>{e.addEventListener("click",(function(){const e=this.closest(".product-item"),t=this.getAttribute("data-size");e.querySelectorAll(".size-btn").forEach((e=>{e.classList.remove("active")})),this.classList.add("active");const n=e.querySelector(".product-preview-size");n&&(n.textContent=`المقاس: ${t}`),console.log(`Talla seleccionada: ${t} para el producto ID: ${e.getAttribute("data-product-id")}`)}))}))}function initQuantityControls(){console.log("Inicializando controles de cantidad...");document.querySelectorAll(".quantity-controls").forEach((e=>{const t=e.querySelector(".decrease"),n=e.querySelector(".increase"),o=e.querySelector(".product-qty");t&&n&&o&&(t.addEventListener("click",(function(){const e=parseInt(o.value);e>1&&(o.value=e-1,updateProductQuantity(this.closest(".product-item")))})),n.addEventListener("click",(function(){const e=parseInt(o.value);e<10&&(o.value=e+1,updateProductQuantity(this.closest(".product-item")))})))}))}function updateProductQuantity(e){if(!e)return;const t=e.querySelector(".product-qty"),n=e.querySelector(".product-preview-qty");t&&n&&(n.textContent=`الكمية: ${t.value}`),updateTotalPrice()}function updateProductPreview(e,t){if(!e||!t)return;const n=e.querySelector(".product-preview-img");if(n){let e="";switch(t){case"black":default:e="public/images/black/black-tshirt.jpg";break;case"silver":e="public/images/silver/silver-tshirt.jpg";break;case"beige":e="public/images/beige/beige-tshirt.jpg"}n.src=e,n.alt=`طقم HELDEN ${getColorName(t)}`}const o=e.querySelector(".product-preview-color");o&&(o.textContent=`اللون: ${getColorName(t)}`)}function initProductControls(){console.log("Inicializando controles de productos...");const e=document.getElementById("addProductBtn"),t=document.getElementById("selectedProductsContainer");if(e&&t){let n=1;const o=t.querySelectorAll(".product-item");n=o.length,n>0&&(n=Math.max(...Array.from(o).map((e=>parseInt(e.getAttribute("data-product-id"))||0)))),e.addEventListener("click",(function(){n++,addNewProduct(n),updateTotalPrice()})),setupRemoveButtons(),setupDiscountButtons()}}function addNewProduct(e){const t=document.getElementById("selectedProductsContainer");if(!t)return;const n=document.createElement("div");n.className="product-item",n.setAttribute("data-product-id",e);const o=1===e,l=o?'\n                    <div class="product-color-option black active" data-color="black">\n                        <div class="color-swatch black"></div>\n                        <span>أسود</span>\n                    </div>\n                    <div class="product-color-option beige" data-color="beige">\n                        <div class="color-swatch beige"></div>\n                        <span>بيج</span>\n                    </div>\n                    <div class="product-color-option silver" data-color="silver">\n                        <div class="color-swatch silver"></div>\n                        <span>فضي</span>\n                    </div>\n                    <div class="product-color-option blue" data-color="blue">\n                        <div class="color-swatch blue"></div>\n                        <span>أزرق</span>\n                    </div>':'\n                    <div class="product-color-option black active" data-color="black">\n                        <div class="color-swatch black"></div>\n                        <span>أسود</span>\n                    </div>\n                    <div class="product-color-option beige" data-color="beige">\n                        <div class="color-swatch beige"></div>\n                        <span>بيج</span>\n                    </div>\n                    <div class="product-color-option silver" data-color="silver">\n                        <div class="color-swatch silver"></div>\n                        <span>فضي</span>\n                    </div>',i=o?'\n                    <button type="button" class="size-btn" data-size="M">M</button>\n                    <button type="button" class="size-btn" data-size="L">L</button>\n                    <button type="button" class="size-btn active" data-size="XL">XL</button>\n                    <button type="button" class="size-btn" data-size="2XL">2XL</button>\n                    <button type="button" class="size-btn" data-size="3XL">3XL</button>':'\n                    <button type="button" class="size-btn" data-size="M">M</button>\n                    <button type="button" class="size-btn" data-size="L">L</button>\n                    <button type="button" class="size-btn active" data-size="XL">XL</button>\n                    <button type="button" class="size-btn" data-size="2XL">2XL</button>';n.innerHTML=`\n        <div class="product-item-header">\n            <h4 class="product-item-title">المنتج #${e}</h4>\n            <button type="button" class="remove-product-btn" data-product-id="${e}">\n                <i class="fas fa-times"></i>\n            </button>\n        </div>\n        \n        <div class="product-item-options">\n            <div class="product-color-selection">\n                <label class="form-label">اللون:</label>\n                <div class="product-color-options">\n                    ${l}\n                </div>\n            </div>\n            \n            <div class="product-sizes">\n                <label class="field-label">اختر المقاس:</label>\n                <div class="size-selection">\n                    ${i}\n                </div>\n            </div>\n            \n            <div class="product-quantity">\n                <label class="form-label">الكمية:</label>\n                <div class="quantity-controls">\n                    <button type="button" class="quantity-btn decrease">-</button>\n                    <input type="number" class="product-qty" value="1" min="1" max="10" readonly>\n                    <button type="button" class="quantity-btn increase">+</button>\n                </div>\n            </div>\n        </div>\n        \n        <div class="product-item-summary">\n            <div class="product-preview">\n                <img src="public/images/black/black-tshirt.jpg" alt="تي شيرت أسود" class="product-preview-img">\n                <div class="product-preview-details">\n                    <span class="product-preview-color">اللون: أسود</span>\n                    <span class="product-preview-size">المقاس: XL</span>\n                    <span class="product-preview-qty">الكمية: 1</span>\n                </div>\n            </div>\n            <div class="product-price">\n                <span class="item-price">599 ج.م</span>\n            </div>\n        </div>\n    `,t.appendChild(n),initColorSelection(),initSizeSelection(),initQuantityControls(),setupRemoveButtons(),console.log(`Nuevo producto añadido con ID: ${e}`)}function setupRemoveButtons(){document.querySelectorAll(".remove-product-btn").forEach((e=>{const t=e.cloneNode(!0);e.parentNode.replaceChild(t,e),t.addEventListener("click",(function(){const e=this.getAttribute("data-product-id"),t=this.closest(".product-item");document.querySelectorAll(".product-item").length>1?(t.remove(),updateTotalPrice(),console.log(`Producto eliminado con ID: ${e}`)):alert("يجب أن يكون هناك منتج واحد على الأقل في الطلب.")}))}))}function setupDiscountButtons(){const e=document.getElementById("addOutfitDiscountBtn"),t=document.getElementById("addThirdOutfitBtn");if(e){const t=e.cloneNode(!0);e.parentNode.replaceChild(t,e),t.addEventListener("click",(function(){console.log("تم الضغط على زر إضافة طقم آخر");const e=document.querySelectorAll(".product-item");if(e.length<2){addNewProduct(e.length+1),updateTotalPrice(),console.log("تم إضافة المنتج الثاني مع خصم 10%")}else alert('لقد أضفت بالفعل طقمين. استخدم زر "إضافة الطقم الثالث" للاستفادة من خصم إضافي.')}))}if(t){const e=t.cloneNode(!0);t.parentNode.replaceChild(e,t),e.addEventListener("click",(function(){console.log("تم الضغط على زر إضافة الطقم الثالث");const e=document.querySelectorAll(".product-item");if(e.length<3){addNewProduct(e.length+1),updateTotalPrice(),console.log("تم إضافة المنتج الثالث مع خصم 15%")}else alert("لقد أضفت بالفعل 3 أطقم، وهو الحد الأقصى لكل طلب.")}))}}function updateTotalPrice(){const e=document.querySelectorAll(".product-item").length,t=document.getElementById("totalItems"),n=document.getElementById("totalPrice"),o=document.querySelector(".add-third-outfit");o&&(o.style.display=2===e?"block":"none");const l=document.querySelector(".add-outfit-discount:not(.add-third-outfit)");if(l&&(l.style.display=1===e?"block":"none"),t&&(t.textContent=e),n){let t=599,o=0,l=t,i=!1;1===e?(l=t,o=t):2===e?(l=550,o=1100,i=!0):3===e?(l=Math.round(1400/3),o=1400,i=!0):e>3&&(l=Math.round(1400/3),o=l*e,i=!0),n.textContent=`${o} ج.م`,document.querySelectorAll(".product-item .item-price").forEach((e=>{e.textContent=`${l} ج.م`}));const r=document.querySelector(".discount-value"),a=document.querySelectorAll(".discount-tier");if(r){const n=t*e,l=n-o,a=Math.round(l/n*100);i?(r.textContent=`${l} ج.م (${a}%)`,r.style.color="var(--success-color)"):(r.textContent="0 ج.م (0%)",r.style.color="")}a.length>0&&(a[0].style.opacity=1===e?"1":"0.5",a[1].style.opacity=e<=2?"1":"0.5",2===e?(a[0].classList.add("active-discount"),a[1].classList.remove("active-discount")):e>=3?(a[0].classList.remove("active-discount"),a[1].classList.add("active-discount")):a.forEach((e=>e.classList.remove("active-discount"))));const c=document.querySelector(".original-total-price");c&&(c.textContent=750*e+" ج.م");const s=document.querySelector(".order-summary");let d=s.querySelector(".discount-notification");if(i){d||(d=document.createElement("div"),d.className="discount-notification",s.appendChild(d));const t=2===e?"10%":"15%";d.textContent=`🎉 تم تطبيق خصم ${t}!`,d.style.display="block",setTimeout((()=>{d&&"none"!==d.style.display&&(d.style.display="none")}),4e3)}else d&&(d.style.display="none")}}function submitOrder(){console.log("Procesando envío del pedido...");const e=document.getElementById("fullName").value,t=document.getElementById("mobileNumber").value,n=document.getElementById("governorate").value,o=document.getElementById("detailedAddress").value,l=document.getElementById("orderNotes").value;if(!(e&&t&&n&&o))return void alert("يرجى ملء جميع الحقول المطلوبة قبل إرسال الطلب.");const i=[];document.querySelectorAll(".product-item").forEach((e=>{const t=e.getAttribute("data-product-id"),n=e.querySelector(".product-color-option.active"),o=e.querySelector(".size-btn.active"),l=e.querySelector(".product-qty"),r=n?n.getAttribute("data-color"):"black",a=o?o.getAttribute("data-size"):"L",c=l?l.value:1;i.push({id:t,color:r,size:a,quantity:c})}));const r="SO-"+Math.floor(1e5+9e5*Math.random()),a={id:r,order_number:r,customer_name:e,customer_mobile:t,customer_governorate:n,customer_address:o,customer_notes:l,products:i,total_items:i.length,total_price:document.getElementById("totalPrice").textContent,order_date:(new Date).toISOString(),status:"pending"};console.log("Datos del pedido:",a);fetch("https://hook.eu2.make.com/a57g4b7o4x4f1qzh7wtjpme6tgr42xcl",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((e=>e.json())).then((e=>{console.log("Success:",e),document.getElementById("orderNumber").textContent=r,document.getElementById("successModal").classList.add("show"),document.getElementById("codOrderForm").reset();const t=document.getElementById("selectedProductsContainer").querySelectorAll(".product-item");for(let e=1;e<t.length;e++)t[e].remove();updateTotalPrice()})).catch((e=>{console.error("Error:",e),alert("حدث خطأ أثناء معالجة طلبك. يرجى المحاولة مرة أخرى.")}))}function closeSuccessModal(){document.getElementById("successModal").classList.remove("show")}document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("mobileNumber");e&&e.addEventListener("input",(function(){const e=this.selectionStart,t=this.value.length;this.value=convertArabicToEnglishNumbers(this.value),this.value.length!==t&&this.setSelectionRange(e,e)}))})),document.addEventListener("DOMContentLoaded",(()=>{initHeroSlider(),initColorShowcase(),initSizeSelection(),initProductSearch(),initMobileMenu(),initSmoothScroll(),initScrollEffects()})),docReady((function(){initHeroSlider(),initColorShowcase(),initHeaderScrollEffect(),initProductGallery(),initEnhancedTestimonials(),initEgyptianReviews(),initReviewsGalleryLightbox(),initReviewsGallery(),initSmoothScroll(),initScrollEffects(),enhanceIconsInteractivity(),addCSSAnimations(),initSizeChartModal(),initSizeCalculator(),initGalleryZoom(),initSizeChartSection(),initInlineSizeChart()})),document.addEventListener("DOMContentLoaded",(function(){initOrderForm()}));