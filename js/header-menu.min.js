(function(){document.addEventListener("DOMContentLoaded",(function(){console.log("تهيئة القائمة الرئيسية...");initializeHeaderMenu()}));function initializeHeaderMenu(){const menuToggle=document.getElementById("mobile-menu-toggle");const mobileMenu=document.getElementById("mobile-menu");const navLinks=document.querySelectorAll(".mobile-nav-link");const header=document.querySelector(".main-header");if(!menuToggle||!mobileMenu){console.error("لم يتم العثور على عناصر القائمة الأساسية!");return}document.body.classList.add("menu-initialized");menuToggle.addEventListener("click",(function(e){e.preventDefault();toggleMenu()}));navLinks.forEach((link=>{link.addEventListener("click",(function(){closeMenu();setTimeout((()=>{const targetId=this.getAttribute("href").substring(1);const targetElement=document.getElementById(targetId);if(targetElement){const headerHeight=header.offsetHeight;const targetPosition=targetElement.getBoundingClientRect().top+window.pageYOffset;window.scrollTo({top:targetPosition-headerHeight,behavior:"smooth"})}}),300)}))}));document.addEventListener("click",(function(e){if(mobileMenu.classList.contains("active")&&!mobileMenu.contains(e.target)&&!menuToggle.contains(e.target)){closeMenu()}}));let lastScrollTop=0;window.addEventListener("scroll",(function(){const scrollTop=window.pageYOffset||document.documentElement.scrollTop;if(scrollTop>50){header.classList.add("scrolled")}else{header.classList.remove("scrolled")}if(Math.abs(scrollTop-lastScrollTop)>50&&mobileMenu.classList.contains("active")){closeMenu()}lastScrollTop=scrollTop}));window.addEventListener("scroll",(function(){updateActiveNavLink()}));console.log("تم تهيئة القائمة الرئيسية بنجاح!")}function toggleMenu(){const menuToggle=document.getElementById("mobile-menu-toggle");const mobileMenu=document.getElementById("mobile-menu");if(mobileMenu.classList.contains("active")){closeMenu()}else{openMenu()}}function openMenu(){const menuToggle=document.getElementById("mobile-menu-toggle");const mobileMenu=document.getElementById("mobile-menu");document.body.classList.add("menu-open");const icon=menuToggle.querySelector("i");if(icon){icon.classList.remove("fa-bars");icon.classList.add("fa-times")}mobileMenu.classList.add("active");const navItems=mobileMenu.querySelectorAll(".mobile-nav-item");navItems.forEach(((item,index)=>{setTimeout((()=>{item.classList.add("animated")}),100*index)}))}function closeMenu(){const menuToggle=document.getElementById("mobile-menu-toggle");const mobileMenu=document.getElementById("mobile-menu");document.body.classList.remove("menu-open");const icon=menuToggle.querySelector("i");if(icon){icon.classList.remove("fa-times");icon.classList.add("fa-bars")}mobileMenu.classList.remove("active");const navItems=mobileMenu.querySelectorAll(".mobile-nav-item");navItems.forEach((item=>{item.classList.remove("animated")}))}function updateActiveNavLink(){const scrollPosition=window.scrollY+150;const navLinks=document.querySelectorAll(".mobile-nav-link");navLinks.forEach((link=>{const targetId=link.getAttribute("href").substring(1);const targetSection=document.getElementById(targetId);if(targetSection){const sectionTop=targetSection.offsetTop;const sectionBottom=sectionTop+targetSection.offsetHeight;if(scrollPosition>=sectionTop&&scrollPosition<sectionBottom){navLinks.forEach((l=>l.classList.remove("active")));link.classList.add("active")}}}))}})();