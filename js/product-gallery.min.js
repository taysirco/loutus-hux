!function(){document.addEventListener("DOMContentLoaded",(function(){console.log("Initializing Product Gallery...");document.getElementById("details-gallery-section")?function(){if(n=document.getElementById("details-gallery-section"),t=document.getElementById("current-main-image"),i=n?.querySelector(".main-image-container"),a=document.getElementById("gallery-thumbnails"),c=n?.querySelectorAll(".gallery-color-option"),s=n?.querySelector(".gallery-nav-button.prev"),r=n?.querySelector(".gallery-nav-button.next"),d=document.getElementById("current-gallery-image"),g=document.getElementById("total-gallery-images"),u=document.getElementById("gallery-counter"),!(n&&t&&a&&c&&0!==c.length))return void console.error("Essential gallery elements not found. Aborting initialization.");console.log("Gallery elements cached."),m(o),c.forEach((n=>{n.addEventListener("click",(function(){console.log("Color button clicked:",this.dataset.color);const n=this.dataset.color;n&&n!==o&&e[n]?.length>0?(console.log(`Valid color change selected: ${n}`),o=n,l=0,m(n),function(e){if(console.log(`Updating active color button styling. Active: ${e}`),!c)return;c.forEach((o=>{o.dataset.color===e?o.classList.add("active"):o.classList.remove("active")}))}(n)):console.warn(`Invalid color selected ('${n}'), or no images for it, or already active.`)}))})),s&&r?(s.addEventListener("click",(()=>b("prev"))),r.addEventListener("click",(()=>b("next"))),console.log("Navigation buttons listeners added.")):console.warn("Gallery navigation buttons not found.");(function(){console.log("Initializing zoom functionality...");const e=n?.querySelector(".zoom-button"),o=document.getElementById("image-zoom-modal"),l=o?.querySelector(".close-zoom"),i=o?.querySelector("#zoomed-image");if(!(e&&o&&l&&i))return void console.warn("Zoom elements not found, zoom functionality disabled.");e.addEventListener("click",(()=>{console.log("Zoom button clicked");const e=t?.src,l=t?.alt;e&&!e.includes("placeholder.jpg")?(console.log("Opening zoom modal for:",e),i.src=e,i.alt=l||"صورة مكبرة",o.style.display="flex",document.body.style.overflow="hidden"):console.log("Zoom prevented for placeholder/error image.")})),l.addEventListener("click",h),o.addEventListener("click",(e=>{e.target===o&&(console.log("Closing zoom modal due to background click."),h())})),console.log("Zoom functionality initialized.")})(),console.log("Product Gallery Initialized successfully.")}():console.warn("Gallery section #details-gallery-section not found on DOMContentLoaded.")}));const e={black:["public/images/black/full-black.jpg","public/images/black/black-tshirt.jpg"],silver:["public/images/silver/full-silver.jpg","public/images/silver/silver-tshirt.jpg"],beige:["public/images/beige/full.jpg","public/images/beige/beige-tshirt.jpg"]};let o="black",l=0,n=null,t=null,i=null,a=null,c=null,s=null,r=null,d=null,g=null,u=null;function m(o){console.log(`Updating gallery for color: ${o}`);const n=(e[o]||[]).length;if(0===n)return console.warn(`No images found for color: ${o}. Displaying placeholder.`),t&&(t.src="public/images/placeholder.jpg",t.alt="لا توجد صور متاحة"),a&&(a.innerHTML=""),p(0,0),void v(0);l>=n&&(console.log(`Resetting image index from ${l} to 0 for color ${o}`),l=0),y(o,l),function(o,n){if(console.log(`Updating thumbnails for color: ${o}, Active index: ${n}`),!a)return void console.error("Thumbnails container not available.");const t=e[o]||[];if(a.innerHTML="",t.length<=1)return console.log("Hiding thumbnails as there is only one image."),void(a.style.display="none");a.style.display="",console.log(`Generating ${t.length} thumbnails.`),t.forEach(((e,i)=>{const c=document.createElement("div");c.className="gallery-thumbnail "+(i===n?"active":""),c.dataset.index=i;const s=new Image;s.src=e,s.alt=`صورة مصغرة ${i+1} - ${E(o)}`,s.style.width="100%",s.style.height="100%",s.style.objectFit="cover",c.addEventListener("click",(()=>{i!==l&&(console.log(`Thumbnail ${i} clicked.`),l=i,y(o,i),f(i),p(i+1,t.length))})),c.appendChild(s),a.appendChild(c)}))}(o,l),p(l+1,n),v(n)}function y(o,l){if(console.log(`Attempting to update main image. Color: ${o}, Index: ${l}`),!t)return void console.error("Main image element not available.");const n=e[o]||[];if(!n[l])return console.error(`Image URL not found for color ${o} at index ${l}`),t.src="public/images/placeholder.jpg",void(t.alt="خطأ في تحميل الصورة");const a=n[l],c=`طقم HELDEN ${E(o)} - صورة ${l+1}`;console.log(`Updating main image src to: ${a}`),i?.classList.add("loading");const s=new Image;s.onload=()=>{t.src=a,t.alt=c,i?.classList.remove("loading"),console.log(`Main image successfully loaded: ${a}`);const e=document.getElementById("zoomed-image");e&&"flex"===document.getElementById("image-zoom-modal")?.style.display&&(e.src=a)},s.onerror=()=>{console.error(`Failed to load main image: ${a}`),t.src="public/images/placeholder.jpg",t.alt="خطأ في تحميل الصورة",i?.classList.remove("loading")},s.src=a}function f(e){if(console.log(`Updating active thumbnail styling. Active index: ${e}`),!a)return;a.querySelectorAll(".gallery-thumbnail").forEach((o=>{parseInt(o.dataset.index,10)===e?o.classList.add("active"):o.classList.remove("active")}))}function p(e,o){d&&g&&u&&(o>0?(d.textContent=e,g.textContent=o,u.style.display=""):u.style.display="none")}function v(e){s&&r&&(e<=1?(s.style.display="none",r.style.display="none"):(s.style.display="",r.style.display=""))}function b(n){console.log(`Navigate gallery called: ${n}`);const t=(e[o]||[]).length;if(t<=1)return void console.log("Navigation ignored: only one image.");let i;i="prev"===n?(l-1+t)%t:(l+1)%t,i!==l&&(console.log(`Navigating from index ${l} to ${i}`),l=i,y(o,i),f(i),p(i+1,t))}function h(){console.log("Closing zoom modal.");const e=document.getElementById("image-zoom-modal");e&&(e.style.display="none",document.body.style.overflow="")}function E(e){switch(e){case"black":return"أسود";case"white":return"أبيض";case"silver":return"فضي";case"beige":return"بيج";default:return e}}}();